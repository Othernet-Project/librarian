// Generated by CoffeeScript 1.10.0
(function(window, $, templates) {
  var FIELDS, cacheSelectors, fields, index, initPlugin, onTransponderSwitch, onddForm, options, section;
  FIELDS = ['frequency', 'symbolrate', 'polarization', 'delivery', 'modulation'];
  section = $('#dashboard-ondd');
  onddForm = null;
  fields = {};
  options = {};
  cacheSelectors = function() {
    var f, i, len, results;
    results = [];
    for (i = 0, len = FIELDS.length; i < len; i++) {
      f = FIELDS[i];
      results.push(fields[f] = $("#" + f));
    }
    return results;
  };
  index = function() {
    var transponders;
    transponders = onddForm.find('#transponders');
    return (transponders.find('option')).each(function() {
      var opt;
      opt = $(this);
      options[opt.val()] = opt;
    });
  };
  onTransponderSwitch = function() {
    var coverage, customSettingsFields, data, f, help, i, len, opt, transponders, val;
    customSettingsFields = onddForm.find('.settings-fields');
    transponders = onddForm.find('#transponders');
    val = transponders.val();
    opt = options[val];
    help = transponders.next('.o-field-help-message');
    help.text('');
    help.hide();
    if (!val) {
      customSettingsFields.hide();
    } else if (val === '-1') {
      customSettingsFields.show();
    } else {
      customSettingsFields.hide();
      data = opt.data();
      coverage = data.coverage;
      help.text(coverage);
      help.show();
      $('.o-field-error').removeClass("o-field-error");
      $(".o-field-error-message").remove();
      for (i = 0, len = FIELDS.length; i < len; i++) {
        f = FIELDS[i];
        fields[f].val(data[f]);
      }
    }
    section.trigger('resize');
  };
  initPlugin = function(e) {
    onddForm = section.find('#ondd-form');
    if (!onddForm.length) {
      return;
    }
    onddForm.on('change', '#transponders', onTransponderSwitch);
    ($(window)).on('transponder-updated', function() {
      index();
      cacheSelectors();
      return onTransponderSwitch();
    });
    index();
    cacheSelectors();
    return onTransponderSwitch();
  };
  initPlugin();
  return section.on('dashboard-plugin-loaded', initPlugin);
})(this, this.jQuery, this.templates);
